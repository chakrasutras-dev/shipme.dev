# ShipMe Product Specification v2.0

> AI-Powered Infrastructure Provisioning Platform
> **CODESPACES-FIRST ARCHITECTURE**

**Version:** 2.0
**Date:** February 2026
**Status:** Planning (Major Architectural Pivot)

---

## âš ï¸ CRITICAL PIVOT FROM v1.0

This version represents a **fundamental architectural change** from the original approach:

| Aspect | v1.0 (Old) | v2.0 (New) |
|--------|------------|------------|
| **Core Model** | Web dashboard + manual setup | GitHub Codespaces + AI agent |
| **User Action** | Follow step-by-step guide | Watch AI provision in real-time |
| **Credential Handling** | Copy/paste between dashboards | Automated via MCP servers |
| **Time to Deploy** | 30-45 minutes | 5-10 minutes |
| **Visibility** | Instructions only | Full terminal visibility |
| **Learning** | Read documentation | Watch and interact |

---

## Executive Summary

ShipMe v2.0 pivots from a "guided setup" model to a **"watch the AI work"** model. Instead of providing instructions for users to follow manually, ShipMe launches a GitHub Codespace where Claude Code provisions infrastructure in real-time while the user watches, learns, and can intervene.

**Key Insight:** Users don't want instructionsâ€”they want results. But they also want to understand and control what's happening.

---

## Product Vision

### Problem (Expanded from v1.0)

1. **Manual provisioning is error-prone:** Even with good instructions, users make mistakes
2. **Credential handling is insecure:** Copy/pasting secrets between dashboards
3. **No visibility into automation:** "Black box" provisioning creates distrust
4. **Learning is disconnected:** Reading docs â‰  understanding systems
5. **Context switching is exhausting:** Jumping between 5+ dashboards

### Solution: Codespaces-First

ShipMe v2.0 launches users into a GitHub Codespace where:
- Claude Code (AI agent) provisions everything automatically
- User watches in real-time via VS Code terminal
- User can ask questions, request changes, intervene at any point
- All credentials handled securely within the Codespace
- User ends up with working infrastructure + development environment

---

## Architecture Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      SHIPME.DEV (Web App)                        â”‚
â”‚              Simplified: Project Intake + Codespace Launcher     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    Project Intake                         â”‚   â”‚
â”‚  â”‚                                                           â”‚   â”‚
â”‚  â”‚  "Describe your project..."                               â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚ I want to build a SaaS for pet owners to track      â”‚  â”‚   â”‚
â”‚  â”‚  â”‚ their pet's health with AI-powered insights...      â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â”‚                                                           â”‚   â”‚
â”‚  â”‚  [ğŸš€ Launch Development Environment]                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ Creates repo from template
                              â”‚ Launches Codespace
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    GITHUB CODESPACE                              â”‚
â”‚            (VS Code in Browser - User's Environment)             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  TERMINAL (User watches Claude Code work)                 â”‚   â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚   â”‚
â”‚  â”‚                                                           â”‚   â”‚
â”‚  â”‚  ğŸ¤– Claude: I'll set up your pet health SaaS. Starting   â”‚   â”‚
â”‚  â”‚     with Supabase for your database and auth...          â”‚   â”‚
â”‚  â”‚                                                           â”‚   â”‚
â”‚  â”‚  âœ“ Created Supabase project: pet-health-prod             â”‚   â”‚
â”‚  â”‚  âœ“ Database schema applied (pets, health_logs, users)    â”‚   â”‚
â”‚  â”‚  âœ“ Google OAuth configured                                â”‚   â”‚
â”‚  â”‚                                                           â”‚   â”‚
â”‚  â”‚  ğŸ¤– Claude: Now deploying to Netlify...                   â”‚   â”‚
â”‚  â”‚                                                           â”‚   â”‚
â”‚  â”‚  âœ“ Netlify site created: pet-health-app                  â”‚   â”‚
â”‚  â”‚  âœ“ Environment variables configured                       â”‚   â”‚
â”‚  â”‚  âœ“ Custom domain ready for configuration                  â”‚   â”‚
â”‚  â”‚                                                           â”‚   â”‚
â”‚  â”‚  ğŸ¤– Claude: Your app is live at:                          â”‚   â”‚
â”‚  â”‚     https://pet-health-app.netlify.app                    â”‚   â”‚
â”‚  â”‚                                                           â”‚   â”‚
â”‚  â”‚  You: "Can you also add Stripe for payments?"             â”‚   â”‚
â”‚  â”‚                                                           â”‚   â”‚
â”‚  â”‚  ğŸ¤– Claude: Sure! Adding Stripe integration now...        â”‚   â”‚
â”‚  â”‚                                                           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚   FILES     â”‚  â”‚  EXPLORER   â”‚  â”‚   SOURCE    â”‚              â”‚
â”‚  â”‚  (visible)  â”‚  â”‚  (visible)  â”‚  â”‚  CONTROL    â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                                  â”‚
â”‚  Pre-installed:                                                  â”‚
â”‚  â€¢ Claude Code extension                                         â”‚
â”‚  â€¢ MCP servers (Supabase, Netlify, GCP, GitHub)                 â”‚
â”‚  â€¢ CLI tools (netlify-cli, supabase, gcloud)                    â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ Claude Code uses MCP servers
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     MCP SERVER LAYER                             â”‚
â”‚            (Programmatic access to cloud services)               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ Supabase    â”‚  â”‚  Netlify    â”‚  â”‚    GCP      â”‚              â”‚
â”‚  â”‚ MCP Server  â”‚  â”‚ MCP Server  â”‚  â”‚ MCP Server  â”‚              â”‚
â”‚  â”‚             â”‚  â”‚             â”‚  â”‚             â”‚              â”‚
â”‚  â”‚ â€¢ Projects  â”‚  â”‚ â€¢ Sites     â”‚  â”‚ â€¢ OAuth     â”‚              â”‚
â”‚  â”‚ â€¢ Auth      â”‚  â”‚ â€¢ Env vars  â”‚  â”‚ â€¢ IAM       â”‚              â”‚
â”‚  â”‚ â€¢ Database  â”‚  â”‚ â€¢ Deploys   â”‚  â”‚ â€¢ APIs      â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚         â”‚                â”‚                â”‚                      â”‚
â”‚         â–¼                â–¼                â–¼                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                    SECRET VAULT                              â”‚â”‚
â”‚  â”‚              (In-memory, encrypted, ephemeral)               â”‚â”‚
â”‚  â”‚                                                              â”‚â”‚
â”‚  â”‚  â€¢ Credentials never written to disk                         â”‚â”‚
â”‚  â”‚  â€¢ Auto-destroyed when Codespace stops                       â”‚â”‚
â”‚  â”‚  â€¢ Referenced by ID, not value                               â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     CLOUD SERVICES                               â”‚
â”‚                 (Provisioned automatically)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ GitHub  â”‚  â”‚Supabase â”‚  â”‚ Netlify â”‚  â”‚  GCP    â”‚            â”‚
â”‚  â”‚  Repo   â”‚  â”‚ Project â”‚  â”‚  Site   â”‚  â”‚ OAuth   â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                                  â”‚
â”‚  All created and configured by Claude Code                       â”‚
â”‚  User has full access and ownership                              â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Core Features

### 1. Simplified Web Interface (shipme.dev)

**Removed from v1.0:**
- Complex dashboard
- Infrastructure plan display
- Step-by-step instructions UI

**Kept/Added:**
- Landing page with value proposition
- Project description intake (chat)
- GitHub OAuth for Codespace creation
- "Launch Development Environment" button

### 2. GitHub Codespace Environment

**Pre-configured Template Repository:**
- `.devcontainer/devcontainer.json` with all tools
- Claude Code extension pre-installed
- MCP servers for cloud services
- Project configuration from intake

**User Experience:**
- One-click launch from shipme.dev
- VS Code in browser (familiar interface)
- Full terminal visibility
- File explorer, source control visible

### 3. Claude Code Agent

**Capabilities:**
- Reads project description from `.shipme/project.json`
- Uses MCP servers to provision infrastructure
- Explains what it's doing in real-time
- Responds to user questions/requests
- Handles errors and retries

**MCP Servers Available:**
- `supabase-mcp`: Project creation, auth config, database management
- `netlify-mcp`: Site creation, env vars, deployments
- `gcp-mcp`: OAuth client creation, API enablement
- `github-mcp`: Repository management, secrets

### 4. Secret Management

**In-Memory Vault:**
- Credentials stored only in memory
- Encrypted with session key
- Never written to disk or logs
- Destroyed when Codespace stops

**Credential Flow:**
```
MCP Server retrieves credential from cloud API
         â”‚
         â–¼
Credential stored in Secret Vault (memory only)
         â”‚
         â–¼
Claude references by ID: "{{secrets.supabase_anon_key}}"
         â”‚
         â–¼
MCP Server injects actual value when needed
         â”‚
         â–¼
Credential destroyed when session ends
```

### 5. Interactive Provisioning

**User Can:**
- Watch Claude work in real-time
- Ask questions mid-process ("Why did you choose Supabase?")
- Request changes ("Can you use PostgreSQL directly instead?")
- Intervene if something looks wrong
- Add features ("Also add Stripe for payments")

**Claude Can:**
- Explain decisions
- Offer alternatives
- Handle errors gracefully
- Recover from failures
- Ask user for input when needed

---

## User Journey (v2.0)

```
1. LANDING PAGE
   User visits shipme.dev
   Sees value proposition
   Clicks "Get Started"
           â”‚
           â–¼
2. GITHUB AUTHORIZATION
   "Connect your GitHub account"
   User authorizes ShipMe GitHub App
   Permissions: repo creation, codespaces
           â”‚
           â–¼
3. PROJECT DESCRIPTION
   User describes their project
   "I want to build a marketplace for handmade goods
    with user accounts, payments, and seller dashboards"
           â”‚
           â–¼
4. LAUNCH CODESPACE
   User clicks "Launch Development Environment"
   ShipMe creates repo from template
   Codespace starts (~30 seconds)
           â”‚
           â–¼
5. WATCH & INTERACT (This is the magic âœ¨)
   User is now in VS Code (browser)
   Claude Code starts automatically

   Claude: "I'm setting up your marketplace. Here's my plan:
            1. Supabase for database + auth
            2. Netlify for hosting
            3. Stripe for payments
            Starting now..."

   User watches terminal as Claude:
   âœ“ Creates Supabase project
   âœ“ Sets up database schema
   âœ“ Configures Google OAuth
   âœ“ Creates Netlify site
   âœ“ Configures environment variables
   âœ“ Integrates Stripe
   âœ“ Deploys application

   User: "Can the seller dashboard show real-time sales?"
   Claude: "Good idea! I'll add Supabase Realtime subscriptions..."
           â”‚
           â–¼
6. COMPLETION (~5-10 minutes)
   Claude: "Your marketplace is live!
            ğŸŒ https://handmade-market.netlify.app
            ğŸ“Š Admin: /admin (you're already admin)
            ğŸ’³ Stripe: Test mode ready

            Your Codespace is also your development environment.
            Make changes, I'll help you deploy them!"
           â”‚
           â–¼
7. ONGOING DEVELOPMENT
   User keeps Codespace as dev environment
   Can ask Claude for help anytime
   Changes auto-deploy via Netlify
```

---

## Technical Implementation

### Template Repository Structure

```
shipme/starter-template/
â”œâ”€â”€ .devcontainer/
â”‚   â”œâ”€â”€ devcontainer.json      # Codespace configuration
â”‚   â””â”€â”€ post-create.sh         # Setup script
â”œâ”€â”€ .shipme/
â”‚   â”œâ”€â”€ project.json           # Filled by ShipMe with project details
â”‚   â””â”€â”€ config.json            # MCP server configurations
â”œâ”€â”€ mcp-servers/
â”‚   â”œâ”€â”€ supabase/
â”‚   â”‚   â””â”€â”€ index.js
â”‚   â”œâ”€â”€ netlify/
â”‚   â”‚   â””â”€â”€ index.js
â”‚   â””â”€â”€ gcp/
â”‚       â””â”€â”€ index.js
â”œâ”€â”€ src/                       # Starter app code
â”œâ”€â”€ README.md
â””â”€â”€ package.json
```

### devcontainer.json

```json
{
  "name": "ShipMe Development Environment",
  "image": "mcr.microsoft.com/devcontainers/javascript-node:20",

  "features": {
    "ghcr.io/devcontainers/features/github-cli:1": {},
    "ghcr.io/devcontainers/features/docker-in-docker:2": {}
  },

  "customizations": {
    "vscode": {
      "extensions": [
        "anthropic.claude-code",
        "esbenp.prettier-vscode",
        "bradlc.vscode-tailwindcss"
      ],
      "settings": {
        "claude.autoStart": true,
        "claude.mcp.servers": {
          "supabase": {
            "command": "node",
            "args": ["${workspaceFolder}/mcp-servers/supabase/index.js"]
          },
          "netlify": {
            "command": "node",
            "args": ["${workspaceFolder}/mcp-servers/netlify/index.js"]
          },
          "gcp": {
            "command": "node",
            "args": ["${workspaceFolder}/mcp-servers/gcp/index.js"]
          }
        }
      }
    },
    "codespaces": {
      "openFiles": [".shipme/project.json"]
    }
  },

  "postCreateCommand": "bash .devcontainer/post-create.sh",

  "secrets": {
    "ANTHROPIC_API_KEY": {
      "description": "API key for Claude Code (can use ShipMe's for trial)"
    }
  },

  "forwardPorts": [3000, 5432],

  "portsAttributes": {
    "3000": { "label": "App", "onAutoForward": "openPreview" }
  }
}
```

### MCP Server Example (Supabase)

```javascript
// mcp-servers/supabase/index.js
import { Server } from "@modelcontextprotocol/sdk/server/index.js";
import { createClient } from "@supabase/supabase-js";

const server = new Server({
  name: "supabase-mcp",
  version: "1.0.0"
});

// Tool: Create Supabase Project
server.tool("create_project", {
  description: "Create a new Supabase project",
  parameters: {
    name: { type: "string", description: "Project name" },
    region: { type: "string", description: "Region (e.g., us-east-1)" },
    plan: { type: "string", default: "free" }
  },
  handler: async ({ name, region, plan }) => {
    const response = await fetch("https://api.supabase.com/v1/projects", {
      method: "POST",
      headers: {
        "Authorization": `Bearer ${process.env.SUPABASE_ACCESS_TOKEN}`,
        "Content-Type": "application/json"
      },
      body: JSON.stringify({ name, region, plan })
    });

    const project = await response.json();

    // Store credentials in vault (not returned directly)
    await secretVault.store("supabase_url", project.api_url);
    await secretVault.store("supabase_anon_key", project.anon_key);
    await secretVault.store("supabase_service_key", project.service_role_key);

    return {
      success: true,
      project_id: project.id,
      project_name: project.name,
      message: "Project created. Credentials stored securely."
    };
  }
});

// Tool: Configure Auth Provider
server.tool("configure_auth", {
  description: "Configure authentication provider",
  parameters: {
    project_id: { type: "string" },
    provider: { type: "string", enum: ["google", "github"] },
    client_id: { type: "string", description: "Use {{secrets.gcp_client_id}}" },
    client_secret: { type: "string", description: "Use {{secrets.gcp_client_secret}}" }
  },
  handler: async ({ project_id, provider, client_id, client_secret }) => {
    // Resolve secret references
    const actualClientId = await secretVault.resolve(client_id);
    const actualClientSecret = await secretVault.resolve(client_secret);

    // Configure via Supabase Management API
    await supabaseAdmin.configureAuthProvider(project_id, {
      provider,
      client_id: actualClientId,
      client_secret: actualClientSecret
    });

    return { success: true, message: `${provider} auth configured` };
  }
});

server.start();
```

---

## API Key Strategy

### Two-Tier Model

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              TIER 1: ShipMe Platform (Company Key)               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  Purpose: Power the provisioning agent                           â”‚
â”‚                                                                  â”‚
â”‚  â€¢ Anthropic API key owned by ShipMe                             â”‚
â”‚  â€¢ Used for: Claude Code during provisioning                     â”‚
â”‚  â€¢ Rate limited at company level                                 â”‚
â”‚  â€¢ Cost tracked per user session                                 â”‚
â”‚  â€¢ Included in ShipMe subscription (or free tier limits)         â”‚
â”‚                                                                  â”‚
â”‚  User doesn't need their own Anthropic key to get started        â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              TIER 2: User's App (BYOK)                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  Purpose: Power AI features in user's deployed app               â”‚
â”‚                                                                  â”‚
â”‚  â€¢ User provides their own Anthropic API key                     â”‚
â”‚  â€¢ Stored encrypted in user's Supabase project                   â”‚
â”‚  â€¢ Used for: AI features in their production app                 â”‚
â”‚  â€¢ Billed directly to user's Anthropic account                   â”‚
â”‚                                                                  â”‚
â”‚  Claude: "Your app has AI features. You'll need an Anthropic     â”‚
â”‚           API key. Get one at console.anthropic.com/keys"        â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## GitHub Authorization Options

### Option A: Full Automation (OAuth App)

```
User authorizes ShipMe GitHub App
         â”‚
         â–¼
Permissions granted:
â€¢ Create repositories
â€¢ Create Codespaces
â€¢ Read/write repo contents
         â”‚
         â–¼
ShipMe automatically:
â€¢ Creates repo from template
â€¢ Launches Codespace
â€¢ User lands directly in VS Code
```

**Pros:** Seamless one-click experience
**Cons:** Requires broader permissions

### Option B: Guided Manual (Minimal Auth)

```
User clicks "Create Repository"
         â”‚
         â–¼
Opens GitHub template page
User clicks "Use this template"
User names their repo
         â”‚
         â–¼
User returns to ShipMe
Enters repo URL
         â”‚
         â–¼
User clicks "Launch Codespace"
Opens GitHub Codespace page
User clicks "Create codespace"
         â”‚
         â–¼
User is in VS Code
```

**Pros:** Minimal permissions, user control
**Cons:** 2-3 extra clicks

### Recommendation: Offer Both

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  How would you like to create your environment?                  â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  âš¡ Quick Setup (Recommended)                                â”‚â”‚
â”‚  â”‚  One click to create repo and launch Codespace               â”‚â”‚
â”‚  â”‚  Requires GitHub App authorization                           â”‚â”‚
â”‚  â”‚                                                              â”‚â”‚
â”‚  â”‚  [ğŸš€ Quick Setup]                                            â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  ğŸ”§ Manual Setup                                             â”‚â”‚
â”‚  â”‚  Create repo and Codespace yourself (3 steps)                â”‚â”‚
â”‚  â”‚  No additional permissions needed                            â”‚â”‚
â”‚  â”‚                                                              â”‚â”‚
â”‚  â”‚  [Step-by-step Guide]                                        â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Security Model

### Credential Isolation

| Credential | Where Stored | Lifetime | Access |
|------------|--------------|----------|--------|
| GitHub OAuth token | ShipMe backend | Session | ShipMe only |
| Supabase keys | Codespace memory | Codespace lifetime | Claude Code only |
| GCP credentials | Codespace memory | Codespace lifetime | Claude Code only |
| Netlify token | Codespace memory | Codespace lifetime | Claude Code only |
| User's Anthropic key | Codespace secrets | Persistent | User's Codespace |

### Security Guarantees

1. **No credentials on disk:** All secrets in memory only
2. **Scoped access:** Each Codespace isolated
3. **Auto-cleanup:** Secrets destroyed when Codespace stops
4. **User ownership:** All resources created under user's accounts
5. **Audit trail:** Actions logged (without credential values)
6. **No ShipMe access:** ShipMe never sees user's cloud credentials

---

## Metrics (v2.0 Targets)

| Metric | v1.0 Actual | v2.0 Target | Improvement |
|--------|-------------|-------------|-------------|
| Time to first plan | ~3 min | ~1 min | 3x faster |
| Time to complete setup | 30-45 min | 5-10 min | 5x faster |
| Setup success rate | Unknown | > 95% | Automated = reliable |
| User intervention needed | 100% | < 20% | AI handles it |
| Credential exposure risk | High | Near zero | In-memory vault |

---

## Implementation Roadmap

### Phase 1: Foundation (Week 1-2)
- [ ] Create template repository
- [ ] Configure devcontainer
- [ ] Basic MCP server structure

### Phase 2: MCP Servers (Week 2-4)
- [ ] Supabase MCP (projects, auth, database)
- [ ] Netlify MCP (sites, env vars, deploys)
- [ ] GCP MCP (OAuth clients)
- [ ] GitHub MCP (repos, secrets)

### Phase 3: Secret Vault (Week 4-5)
- [ ] In-memory encrypted storage
- [ ] Secret reference system ({{secrets.xxx}})
- [ ] Auto-cleanup on session end

### Phase 4: ShipMe Website (Week 5-6)
- [ ] Simplify to project intake + launcher
- [ ] GitHub App for OAuth
- [ ] Codespace creation API integration

### Phase 5: Polish & Launch (Week 6-8)
- [ ] Error handling & recovery
- [ ] User onboarding flow
- [ ] Documentation
- [ ] Beta launch

---

## Open Questions

1. **Codespace billing:** Free tier (60 hrs/month) sufficient? Or ShipMe subsidizes?

2. **Anthropic key for provisioning:** Free trial with limits? Or require from day 1?

3. **Offline support:** What if user wants to work locally instead of Codespace?

4. **Multi-cloud:** Support for AWS, Azure, GCP beyond OAuth?

5. **Team features:** Multiple developers in same project?

---

*This document represents ShipMe v2.0 - the "Codespaces-first, agent-driven" pivot.*
